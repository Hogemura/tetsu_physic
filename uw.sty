\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{uw}[2019/4/23]

%%%%%%%%%%%パッケージ奴%%%%%%%%%%%

\usepackage{ulem}

%%%%%%%%%%%uwの定義奴%%%%%%%%%%%

\makeatletter
\newif\iff@
\DeclareOption{f}{\f@true}
\ProcessOptions\relax
\makeatother

\makeatletter
\newdimen\@uwdim
\def\uw#1{
\ifmmode\settowidth{\@uwdim}{$#1$}\else\settowidth{\@uwdim}{#1}\fi
\ifdim\@uwdim<1em\@uwdim=1em\fi
\iff@ %下に出す
  \ifmmode\uwave{\hbox to\@uwdim{\hfill $#1$\hfill}}_{\f{}}
  \else$\uwave{\hbox to\@uwdim{\hfill #1\hfill}}_{\f{}}$
  \fi
\else %そのまま
  \uwave{\hbox to\@uwdim{\hfill #1\hfill}}
\fi
}
\makeatother
