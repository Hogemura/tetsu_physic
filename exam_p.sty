\NeedsTeXFormat{pLaTeX2e}
[2019/4/11]
\ProvidesPackage{exam_p}

\usepackage{amsmath,amssymb,amsthm,ulem,fancyhdr,fancybox,layout,caption}
\usepackage[dvipdfmx]{graphicx}
\usepackage[version=4]{mhchem}
\usepackage{circle_eqnumber,enumitem_extended}

%%%%%%%%%%%余白奴%%%%%%%%%%%

\setlength{\oddsidemargin}{0pt}
\setlength{\topmargin}{4pt}

\setlength{\headheight}{20pt}
\setlength{\headsep}{15pt}

\setlength{\textheight}{636pt}
\setlength{\textwidth}{453pt}

\setlength{\marginparsep}{18pt}
\setlength{\marginparwidth}{18pt}

\setlength{\footskip}{28pt}
\setlength{\marginparpush}{16pt}

\setlength{\hoffset}{0pt}
\setlength{\voffset}{0pt}

%%%%%%%%%%%基本コマンド奴%%%%%%%%%%%

\newcommand{\maru}[1]{\ajMaru{#1}}
\newcommand{\safemaru}[1]{{\ooalign{\hfil#1\/\hfil\crcr\raise.167ex\hbox{\mathhexbox20D}}}}
\newcommand{\f}[1]{\,\framebox[1.2cm]{#1}\,}
\newcommand{\ff}[1]{\,\doublebox{\hspace{.7zw}#1\hspace{.7zw}}\,}

%%%%%%%%%%%sectionで問題番号と配点を決めてヘッダに出す奴%%%%%%%%%%%
\newcounter{dist}
\renewcommand{\thesection}{{\Large \textrm{第\combinedarabic{section}問}}}
\renewcommand{\section}[1]{\refstepcounter{section}\setcounter{dist}{#1}}
\renewcommand{\thedist}{{\Large \textrm{配点 \arabic{dist}点}}}

%%%%%%%%%%%図キャプションを全角にする奴%%%%%%%%%%%

\renewcommand{\thefigure}{\combinedarabic{figure}}
\renewcommand{\thetable}{\combinedarabic{table}}

\captionsetup[figure]{font=normalsize}
% \captionsetup[table]{font=normalsize}

\makeatletter
\newcounter{temporalfignum}
\def\marufigcaption{\renewcommand{\figurename}{}
\renewcommand{\thefigure}{\ajMarucounter{figure}}
\setcounter{temporalfignum}{\value{figure}}
\setcounter{figure}{0}
}
\makeatother

\def\normalfigcaption{\renewcommand{\figurename}{図}
\renewcommand{\thefigure}{\combinedarabic{figure}}
\setcounter{figure}{\value{temporalfignum}}
}

%%%%%%%%%%%大問ごとにリセットする奴%%%%%%%%%%%

\makeatletter
\@addtoreset{equation}{section}
\@addtoreset{figure}{section}
\@addtoreset{table}{section}
\makeatother

%%%%%%%%%%%ページ番号のスタイル奴%%%%%%%%%%%

\fancypagestyle{pg}
{
\lhead{\thesection}
\rhead{\thedist}
\cfoot{\normalsize{-- \thepage\ --}}
\renewcommand{\headrulewidth}{0.0pt}
}

%%%%%%%%%%%計算余白になる奴%%%%%%%%%%%

\newcommand{\emptypage}{
  \lhead{}
  \rhead{}
  \begin{center}
    （計算余白）
  \end{center}
  \newpage
  \lhead{\thesection}
  \rhead{\thedist}
}

%%%%%%%%%%%プリアンブルに入れれない奴%%%%%%%%%%%

\def\style{
% \layout
\setcounter{page}{1}
\pagenumbering{arabic}
\pagestyle{pg}
\large
}
