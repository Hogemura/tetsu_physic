\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{Fcntr}[2019/4/21]

%%%%%%%%%%%パッケージ奴%%%%%%%%%%%

\usepackage{enumitem_extended}
\usepackage{fancybox}

%%%%%%%%%%%基本コマンド奴%%%%%%%%%%%

\newtoks\fstyle
\newcounter{Fcntr}
\setcounter{Fcntr}{0}
\newcounter{fref}
\newcounter{ffref}

%%%%%%%%%%%大問でカウンタをリセットする奴%%%%%%%%%%%

\makeatletter
\@addtoreset{Fcntr}{section}
\makeatother

%%%%%%%%%%%fの定義奴%%%%%%%%%%%

\makeatletter
\newif\ifnobox@
\nobox@false
\DeclareOption{nobox}{\nobox@true}
\ProcessOptions\relax
\makeatother

\makeatletter
\def\f#1{
\ifnobox@
  \if#1　{#1}
  \else
    \if#1""\addtocounter{Fcntr}{1}{\csname\the\fstyle\endcsname{Fcntr}}
    \else\setcounter{fref}{#1}{\csname\the\fstyle\endcsname{fref}}
    \fi
  \fi
\else
  \if#1　\framebox[1.2cm]{#1}
  \else
    \if#1""\addtocounter{Fcntr}{1}\framebox[1.2cm]{\csname\the\fstyle\endcsname{Fcntr}}
    \else\setcounter{fref}{#1}\framebox[1.2cm]{\csname\the\fstyle\endcsname{fref}}
    \fi
  \fi
\fi
}
\makeatother

%%%%%%%%%%%ffの定義奴%%%%%%%%%%%

\def\ff#1{
\if#1　\,\doublebox{\hspace{.7zw}　\hspace{.7zw}}\,
\else\setcounter{ffref}{#1}\,\doublebox{\hspace{.7zw}\csname\the\fstyle\endcsname{ffref}\hspace{.7zw}}\,
\fi
}
