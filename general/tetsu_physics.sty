\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{tetsu_physics}

\usepackage{amsmath, amssymb, amsthm, amscd}
\usepackage{manfnt, mathrsfs}
\usepackage[version=4]{mhchem}
\usepackage{chemfig}
\usepackage{fancyhdr}
\usepackage{caption}
\usepackage{cases}
\usepackage{wrapfig}
\usepackage{titlesec}
\usepackage{eqnum_extended, enumitem_extended, Fcntr, uw, figcap_ext, ansframe}
\usepackage{tikz}
\usetikzlibrary{intersections, calc, arrows, decorations.pathmorphing, decorations.markings, patterns}
\usepackage[nooldvoltagedirection]{circuitikz}

% wavy capacitor
\ctikzset{bipoles/wcapacitor/height/.initial=.3}
\ctikzset{bipoles/wcapacitor/width/.initial=.12}
\ctikzset{bipoles/wcapacitor/bend width/.initial=.6}
%
\def\pgf@circ@wcapacitor@path#1{\pgf@circ@bipole@path{wcapacitor}{#1}}
\compattikzset{wavy capacitor/.style = {\circuitikzbasekey, /tikz/to path=\pgf@circ@wcapacitor@path, l=#1}}
%
\pgfcircdeclarebipolescaled{capacitors}
{}
{\ctikzvalof{bipoles/wcapacitor/height}}
{wcapacitor}
{\ctikzvalof{bipoles/wcapacitor/height}}
{\ctikzvalof{bipoles/wcapacitor/width}}
{
  \pgf@circ@setlinewidth{bipoles}{\pgfstartlinewidth}

  \pgfscope
    \pgfsetlinewidth{.5pt}
    \pgfpathmoveto{\pgfpoint{\pgf@circ@res@left}{\pgf@circ@res@up}}
    \pgftransformrotate{-90}
    \pgfpathsine{\pgfpoint{0.5\pgf@circ@res@up}{-\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@right}}
    \pgfpathcosine{\pgfpoint{0.5\pgf@circ@res@up}{\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@right}}
    \pgfpathsine{\pgfpoint{0.5\pgf@circ@res@up}{-\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@left}}
    \pgfpathcosine{\pgfpoint{0.5\pgf@circ@res@up}{\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@left}}
    \pgfusepath{draw}
  \endpgfscope

  \pgfscope
    \pgfsetlinewidth{.5pt}
    \pgfpathmoveto{\pgfpoint{\pgf@circ@res@right}{\pgf@circ@res@up}}
    \pgftransformrotate{-90}
    \pgfpathsine{\pgfpoint{0.5\pgf@circ@res@up}{-\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@right}}
    \pgfpathcosine{\pgfpoint{0.5\pgf@circ@res@up}{\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@right}}
    \pgfpathsine{\pgfpoint{0.5\pgf@circ@res@up}{-\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@left}}
    \pgfpathcosine{\pgfpoint{0.5\pgf@circ@res@up}{\ctikzvalof{bipoles/wcapacitor/bend width}\pgf@circ@res@left}}
    \pgfusepath{draw}
  \endpgfscope
}

%
